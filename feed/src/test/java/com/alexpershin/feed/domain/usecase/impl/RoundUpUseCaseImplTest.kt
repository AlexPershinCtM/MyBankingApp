package com.alexpershin.feed.domain.usecase.impl

import kotlinx.coroutines.test.runTest
import org.junit.Test
import org.junit.jupiter.api.Assertions


class RoundUpUseCaseImplTest {

    private val sut = RoundUpUseCaseImpl()

    @Test
    fun `GIVEn list pf minors, WHEN map to Double, THEN assert value is correct`() {
        //given
        val listOfMinors = listOf<Long>(
            1000,
            150,
            30,
            35,
            400,
            235,
            752,
            123,
        )

        val expected = listOf<Double>(
            10.0,
            1.5,
            0.3,
            0.35,
            4.00,
            2.35,
            7.52,
            1.23,
        )

        // when
        val result = listOfMinors.map { it / 100.0 }

        // then
        Assertions.assertEquals(
            result,
            expected
        )
    }

    //
    @Test
    fun testSimpleData() = runTest {
        assert(true)
        // given
        val listOfDoubles = listOf<Double>(
            10.0,
            1.5,
            0.3,
            0.35,
            4.00,
            2.35,
            7.52,
            1.23,
            2.75,
        )

        // when
        val result = sut.execute(listOfDoubles)

        // then
        val expected = 4.0

        Assertions.assertEquals(
            expected,
            result
        )
    }

    @Test
    fun testComplexData() = runTest {
        // given
        val listOfDoubles = listOf<Double>(
            139.56,
            10.06,
            22.78,
            6.67,
            13.79,
            22.55,
            18.74,
            26.83,
            12.37,
            21.08,
            17.97,
            20.42,
            7.44,
            32.06,
            27.47,
            6.1,
            1.46,
            29.61,
            8.85,
            9.9,
            1.73,
            1.67,
            27.56,
            31.88,
            2.09,
            8.3,
            2000.0,
            500.0,
            135.88,
            22.12,
            134.07,
            130.88,
            33.79,
            36.11,
            7.32,
            38.64,
            21.02,
            24.7,
            32.27,
            38.67,
            15.62,
            1.68,
            24.86,
            23.2,
            37.17,
            21.74,
            1.79,
            2.71,
            1.37,
            4.92,
            2.2,
            1.44,
            26.33,
            4.74,
            5.43,
            33.02,
            9.31,
            2000.0,
            500.0,
            3000.0,
            120.89,
            9.75,
            23.43,
            17.97,
            28.89,
            7.77,
            24.92,
            25.33,
            27.95,
            32.1,
            18.37,
            26.8,
            2.22,
            14.7,
            38.14,
            13.15,
            9.03,
            6.39,
            34.94,
            26.63,
            38.06,
            37.66,
            10.32,
            1.25,
            30.05,
            12.29,
            2000.0,
            500.0,
            107.01,
            106.77,
            5.22,
            105.66,
            12.34,
            104.73,
            94.2,
            5.19,
            3.14,
            34.01,
            35.48,
            32.43,
            34.34,
            23.9,
            18.84,
            18.81,
            2.7,
            16.56,
            23.1,
            19.61,
            9.5,
            34.61,
            20.45,
            29.38,
            11.45,
            33.78,
            6.66,
            30.46,
            24.42,
            35.29,
            15.37,
            33.59,
            2000.0,
            500.0,
            90.12,
            82.26,
            36.98,
            17.72,
            1.4,
            15.39,
            8.54,
            4.23,
            33.57,
            5.06,
            32.73,
            25.13,
            21.85,
            22.44,
            18.77,
            29.16,
            10.29,
            13.88,
            31.92,
            10.19,
            21.16,
            12.39,
            7.7,
            33.36,
            21.72,
            7.53,
            1.51,
            2000.0,
            500.0,
            76.01,
            0.98,
            0.01,
            0.99,
            0.51,
            0.51,
            73.98,
            0.91,
            0.1,
            72.01,
            71.88,
            0.96,
            0.85,
            0.95,
            0.3,
            0.95,
            12.25,
            0.84,
            68.01,
            68.01,
            67.98,
            0.89,
            0.78,
            12.34,
            66.01,
            65.69,
            1.3,
            65.0,
            64.01,
            63.15,
            12.78,
            31.37,
            1.71,
            1.22,
            36.77,
            34.38,
            38.3,
            6.95,
            15.22,
            18.71,
            10.54,
            1.1,
            29.15,
            26.11,
            35.77,
            11.42,
            27.41,
            39.27,
            8.24,
            32.42,
            35.9,
            13.21,
            5.77,
            18.64,
            14.47,
            2000.0,
            500.0,
            15.84,
            26.43,
            16.86,
            20.34,
            6.99,
            1.39,
            22.07,
            35.71,
            16.98,
            30.22,
            20.51,
            14.65,
            39.12,
            26.45,
            10.09,
            2.84,
            25.38,
            31.98,
            6.2,
            5.29,
            34.72,
            38.1,
            10.81,
            11.04,
            34.01,
            2000.0,
            500.0,
            37.0,
            37.0,
            36.2,
            32.2,
            21.87,
            15.5,
            6.2,
            3.13,
            33.93,
            35.44,
            26.08,
            5.2,
            37.98,
            15.49,
            34.11,
            10.81,
            15.59,
            33.62,
            6.54,
            26.84,
            25.33,
            29.74,
            36.89,
            15.15,
            10.57,
            14.97,
            27.08,
            39.53,
            2000.0,
            500.0,
            24.0,
            23.26,
            34.53,
            34.45,
            3.36,
            15.63,
            37.09,
            12.11,
            25.32,
            9.28,
            23.89,
            1.54,
            31.13,
            16.51,
            29.53,
            20.42,
            18.57,
            8.67,
            7.88,
            10.32,
            38.53,
            20.16,
            5.92,
            26.33,
            8.01,
            12.39,
            17.17,
            2000.0,
            500.0,
            8.02,
            11.98,
            7.5,
            13.3,
            11.2,
            6.0,
            5.01,
            4.9,
            12.09,
            4.0,
            3.92,
            2.09,
            2.09,
            1.2,
            14.84,
            45.76,
            14.65,
            23.45,
            21.0,
            35.0,
            2000.0
        )

        // when
        val result = sut.execute(listOfDoubles)

        // then
        val expected = 148.06

        Assertions.assertEquals(
            expected,
            result
        )
    }
}